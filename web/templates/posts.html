<!-- extends the layout.html file -->
{% extends "layout.html" %}

{% block title %}
    Posts
{% endblock %}
<!-- main block starts here -->
{% block main %}
{% set page = "posts" %}
<div class="{{ page }}">
    <div class="top-filter">
        <!-- view will be used to detemine whether user is viewing their own posts or all posts -->
        {% if view %}
        <h1>Your Reports</h1>
        <a href="/account/my-posts/lost">View Lost</a>
        <a href="/account/my-posts/found">View Found</a>
        {% else %}
        <h1>View Reports</h1>
        <a href="/posts/lost/page=1">View Lost</a>
        <a href="/posts/found/page=1">View Found</a>
        {% endif %}

        <form action="/posts/lost/" method="GET" enctype=multipart/form-data novalidate>
        <!-- generate the CSRF token -->
        <div class="filtered">
        <select name="filter">
        {% for item in filter_list %}
        <option value="{{ item }}">{{ item }}</option>
        {% endfor %}
        </select>

        <input type='submit'/>
        </div>
        </form>



    </div>
    <div class="posts-outer">
        <!-- loop through the list and display content from each index -->
        {% for i in range(posts|length) %}
        <a href="/posts/{{ posts[i]['ref_no'] }}">
            <div class="posts-container">
            <div class="posts-thumb">
                {% if posts[i]['fallback'] == "true" %}
                <div class="img" style="background-image: url(http://pets-back-me.s3.eu-west-2.amazonaws.com/fallback.jpg);"></div>
                {% elif posts[i]['fallback'] == "false" %}
                <div class="img" style="background-image: url(http://pets-back-me.s3.eu-west-2.amazonaws.com/{{ posts[i]['ref_no'] }}.jpg);"></div>
                {% endif %}
            </div>
            <div class="posts-info">
                <div class="pi-outer">
                    <div class="pi-inner">
                        {% if posts[i]['name'] %}
                        <p><i class="fas fa-tag"></i> {{ posts[i]['name'] }}</p>
                        <p><i class="fas fa-map-marker-alt"></i> {{ posts[i]['location'] }}, {{ posts[i]['postcode'] }}</p>
                        <p><i class="fas fa-clock"></i> {{ posts[i]['missing_since'].strftime("%d-%m-%Y") }}</p>
                        {% else %}
                        <p><i class="fas fa-tag"></i> {{ posts[i]['colour'] }}</p>
                        <p><i class="fas fa-map-marker-alt"></i> {{ posts[i]['location'] }}, {{ posts[i]['postcode'] }}</p>
                        <p><i class="fas fa-clock"></i> {{ posts[i]['date_found'].strftime("%d-%m-%Y") }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        </a>
        {% endfor %}
        
    </div>
</div>

{% endblock %}